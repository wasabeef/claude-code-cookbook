## æ›´æ–°æ–‡æ¡£å­—ç¬¦ä¸²

ç³»ç»Ÿåœ°ç®¡ç†å¤šè¯­è¨€çš„ docstring/æ³¨é‡Šï¼Œç»´æŠ¤é«˜è´¨é‡çš„æ–‡æ¡£ã€‚

### ä½¿ç”¨æ–¹æ³•

```bash
# è‡ªåŠ¨æ£€æµ‹è¯­è¨€å¹¶æ‰§è¡Œ
ã€Œä¸ºæ²¡æœ‰ docstring çš„ç±»å’Œå‡½æ•°æ·»åŠ æ³¨é‡Šï¼Œå¹¶æ›´æ–°ä¸ç¬¦åˆæ ‡å‡†çš„æ³¨é‡Šã€

# æŒ‡å®šè¯­è¨€æ‰§è¡Œ
/update-doc-string --lang python
ã€ŒæŒ‰ç…§ PEP 257 è§„èŒƒæ›´æ–° Python æ–‡ä»¶çš„ docstringã€

# ç‰¹å®šç›®å½•çš„æ–‡æ¡£æ•´ç†
ã€Œä¸º src/components/ ä¸‹çš„å‡½æ•°æ·»åŠ  JSDocã€
```

### é€‰é¡¹

- `--lang <en|zh-cn>` : æ–‡æ¡£è®°è¿°è¯­è¨€ï¼ˆé»˜è®¤ï¼šä»ç°æœ‰æ³¨é‡Šè‡ªåŠ¨åˆ¤å®šï¼Œæ— åˆ™ä¸º enï¼‰
- `--style <é£æ ¼>` : æŒ‡å®šæ–‡æ¡£é£æ ¼ï¼ˆæœ‰è¯­è¨€ç‰¹å®šçš„é»˜è®¤å€¼ï¼‰
- `--marker <true|false>` : æ˜¯å¦æ·»åŠ  Claude æ ‡è®°ï¼ˆé»˜è®¤ï¼štrueï¼‰

### åŸºæœ¬ç¤ºä¾‹

```bash
# 1. åˆ†æç›®æ ‡æ–‡ä»¶ï¼ˆè‡ªåŠ¨æ£€æµ‹ç¼–ç¨‹è¯­è¨€ï¼‰
find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.ts" -o -name "*.dart" -o -name "*.go" -o -name "*.rs" \) | grep -v test
ã€Œè¯†åˆ«ç¼ºå°‘ docstring çš„å…ƒç´ ï¼ˆæ³¨é‡Šè¡Œæ•°ä¸º 0 æˆ–å°‘äº 30 ä¸ªå­—ç¬¦ï¼‰ã€

# 2. æ·»åŠ æ–‡æ¡£ï¼ˆè‡ªåŠ¨åˆ¤å®šè¯­è¨€ï¼‰
ã€Œä¸ºè¯†åˆ«çš„å…ƒç´ æ·»åŠ åŒ…å«è¯­è¨€ç‰¹å®šå¿…è¦å…ƒç´ çš„ docstringã€
# â†’ å¦‚æœç°æœ‰æ³¨é‡Šä¸­æœ‰ä¸­æ–‡åˆ™ç”¨ä¸­æ–‡ï¼Œå¦åˆ™ç”¨è‹±æ–‡

# 3. æ·»åŠ æ–‡æ¡£ï¼ˆæ˜ç¡®æŒ‡å®šè‹±æ–‡ï¼‰
/update-doc-string --lang en
ã€ŒAdd docstrings with required elements to the identified elementsã€

# 4. ç¡®è®¤æ ‡è®°
ã€Œç¡®è®¤æ‰€æœ‰æ·»åŠ æˆ–æ›´æ–°çš„ docstring éƒ½æœ‰ Claude æ ‡è®°ã€
```

### æ‰§è¡Œæ­¥éª¤

#### 1. ç›®æ ‡å…ƒç´ çš„ä¼˜å…ˆçº§

1. ğŸ”´ **æœ€ä¼˜å…ˆ**: æ²¡æœ‰ docstring/æ³¨é‡Šçš„å…ƒç´ ï¼ˆæ³¨é‡Šè¡Œæ•°ä¸º 0ï¼‰
2. ğŸŸ¡ **æ¬¡ä¼˜å…ˆ**: ä¸ç¬¦åˆæ ‡å‡†çš„å…ƒç´ ï¼ˆå°‘äº 30 ä¸ªå­—ç¬¦æˆ–ç¼ºå°‘å¿…è¦å…ƒç´ ï¼‰
3. ğŸŸ¢ **ç¡®è®¤å¯¹è±¡**: æ²¡æœ‰ Claude æ ‡è®°çš„ç°æœ‰æ³¨é‡Š

**ç›®æ ‡å…ƒç´ ï¼ˆé€šç”¨ï¼‰**ï¼š

- Class/ç±»å®šä¹‰
- Function/å‡½æ•°å’Œæ–¹æ³•
- Module/æ¨¡å—ï¼ˆPython, Goï¼‰
- Enum/æšä¸¾ç±»å‹
- Interface/æ¥å£ï¼ˆTypeScript, Goï¼‰

#### 2. è¯­è¨€ç‰¹å®šç¼–å†™è§„åˆ™

**Python (PEP 257)**ï¼š

```python
# ä¸­æ–‡ç‰ˆï¼ˆé»˜è®¤ï¼‰
def calculate_total(items: List[Item]) -> float:
    """è®¡ç®—å•†å“åˆ—è¡¨çš„æ€»é‡‘é¢ã€‚ï¼ˆ30-60 ä¸ªå­—ç¬¦ï¼‰

    å°†æ¯ä¸ªå•†å“çš„ä»·æ ¼å’Œæ•°é‡ç›¸ä¹˜ï¼Œè¿”å›å«ç¨æ€»é¢ã€‚
    ç©ºåˆ—è¡¨æ—¶è¿”å› 0.0ã€‚ï¼ˆ50-200 ä¸ªå­—ç¬¦ï¼‰

    Args:
        items: è¦è®¡ç®—çš„å•†å“åˆ—è¡¨

    Returns:
        å«ç¨æ€»é‡‘é¢

    Generated by Claude ğŸ¤–
    """

# è‹±æ–‡ç‰ˆï¼ˆ--lang enï¼‰
def calculate_total(items: List[Item]) -> float:
    """Calculate the total amount for a list of items. (30-60 chars)

    Multiplies the price and quantity of each item and returns
    the total with tax. Returns 0.0 for empty lists. (50-200 chars)

    Args:
        items: List of items to calculate

    Returns:
        Total amount with tax

    Generated by Claude ğŸ¤–
    """
```

**JavaScript/TypeScript (JSDoc)**ï¼š

```javascript
/**
 * æ˜¾ç¤ºç”¨æˆ·ä¸ªäººèµ„æ–™çš„ç»„ä»¶ã€‚ï¼ˆ30-60 ä¸ªå­—ç¬¦ï¼‰
 *
 * æ˜¾ç¤ºå¤´åƒå›¾ç‰‡ã€ç”¨æˆ·åå’ŒçŠ¶æ€ä¿¡æ¯ï¼Œ
 * ç‚¹å‡»æ—¶è·³è½¬åˆ°ä¸ªäººèµ„æ–™è¯¦æƒ…é¡µé¢ã€‚ï¼ˆ50-200 ä¸ªå­—ç¬¦ï¼‰
 *
 * @param {Object} props - ç»„ä»¶å±æ€§
 * @param {string} props.userId - ç”¨æˆ· ID
 * @param {boolean} [props.showStatus=true] - çŠ¶æ€æ˜¾ç¤ºæ ‡å¿—
 * @returns {JSX.Element} æ¸²æŸ“çš„ç»„ä»¶
 *
 * @generated by Claude ğŸ¤–
 */
const UserProfile = ({ userId, showStatus = true }) => {
```

**Go**ï¼š

```go
// CalculateTotal è®¡ç®—å•†å“åˆ—è¡¨çš„æ€»é‡‘é¢ã€‚ï¼ˆ30-60 ä¸ªå­—ç¬¦ï¼‰
//
// å°†æ¯ä¸ªå•†å“çš„ä»·æ ¼å’Œæ•°é‡ç›¸ä¹˜ï¼Œè¿”å›å«ç¨æ€»é¢ã€‚
// ç©ºåˆ‡ç‰‡æ—¶è¿”å› 0.0ã€‚ï¼ˆ50-200 ä¸ªå­—ç¬¦ï¼‰
//
// Generated by Claude ğŸ¤–
func CalculateTotal(items []Item) float64 {
```

**Rust**ï¼š

```rust
/// è®¡ç®—å•†å“åˆ—è¡¨çš„æ€»é‡‘é¢ã€‚ï¼ˆ30-60 ä¸ªå­—ç¬¦ï¼‰
///
/// å°†æ¯ä¸ªå•†å“çš„ä»·æ ¼å’Œæ•°é‡ç›¸ä¹˜ï¼Œè¿”å›å«ç¨æ€»é¢ã€‚
/// ç©ºå‘é‡æ—¶è¿”å› 0.0ã€‚ï¼ˆ50-200 ä¸ªå­—ç¬¦ï¼‰
///
/// Generated by Claude ğŸ¤–
pub fn calculate_total(items: &[Item]) -> f64 {
```

**Dart (DartDoc)**ï¼š

```dart
/// æ˜¾ç¤ºç”¨æˆ·ä¸ªäººèµ„æ–™çš„ Widgetã€‚ï¼ˆ30-60 ä¸ªå­—ç¬¦ï¼‰
///
/// å‚ç›´æ’åˆ—å¤´åƒå›¾ç‰‡ã€ç”¨æˆ·åå’ŒçŠ¶æ€ä¿¡æ¯ï¼Œ
/// ç‚¹å‡»æ—¶è·³è½¬åˆ°ä¸ªäººèµ„æ–™è¯¦æƒ…é¡µé¢ã€‚ï¼ˆ50-200 ä¸ªå­—ç¬¦ï¼‰
///
/// Generated by Claude ğŸ¤–
class UserProfileWidget extends StatelessWidget {
```

#### 3. ç°æœ‰å†…å®¹ä¿ç•™è§„åˆ™

1. **ç°æœ‰æ³¨é‡Šç¬¦åˆæ ‡å‡†æ—¶**: ä¿æŒåŸæ ·ï¼ˆä¸æ–°å¢ï¼‰
   - æ ‡å‡†ï¼š30 ä¸ªå­—ç¬¦ä»¥ä¸Šä¸”åŒ…å«å¿…è¦å…ƒç´ ï¼ˆæ¦‚è¦ã€è¯¦ç»†ã€æ ‡è®°ï¼‰
2. **ç°æœ‰æ³¨é‡Šä¸ç¬¦åˆæ ‡å‡†æ—¶**: å®Œå…¨æ›¿æ¢ï¼ˆä¸é‡å¤ï¼‰
3. **æ²¡æœ‰ç°æœ‰æ³¨é‡Šæ—¶**: æ·»åŠ æ–°æ³¨é‡Š

**åº”ä¿ç•™çš„é‡è¦ä¿¡æ¯**ï¼š

- URL å’Œé“¾æ¥ï¼š`See also:`ã€`@see`ã€`å‚ç…§:` ç­‰
- TODO æ³¨é‡Šï¼š`TODO:`ã€`FIXME:`ã€`XXX:` æ ¼å¼
- æ³¨æ„äº‹é¡¹ï¼š`Note:`ã€`Warning:`ã€`æ³¨æ„:` ç­‰
- ä½¿ç”¨ç¤ºä¾‹ï¼š`Example:`ã€`ä¾‹:`ã€`# Examples` ç­‰
- ç°æœ‰çš„å‚æ•°å’Œè¿”å›å€¼è¯´æ˜

### è¯­è¨€ç‰¹å®šè®¾ç½®

```yaml
# è¯­è¨€ç‰¹å®šé»˜è®¤è®¾ç½®
languages:
  python:
    style: "google"  # google, numpy, sphinx
    indent: 4
    quotes: '"""'

  javascript:
    style: "jsdoc"
    indent: 2
    prefix: "/**"
    suffix: "*/"

  typescript:
    style: "tsdoc"
    indent: 2
    prefix: "/**"
    suffix: "*/"

  go:
    style: "godoc"
    indent: 0
    prefix: "//"

  rust:
    style: "rustdoc"
    indent: 0
    prefix: "///"

  dart:
    style: "dartdoc"
    indent: 0
    prefix: "///"
```

### è´¨é‡æ£€æŸ¥æ¸…å•

- âœ… **å­—ç¬¦æ•°**: ä¸¥æ ¼éµå®ˆæ¦‚è¦ 30-60 ä¸ªå­—ç¬¦ã€è¯¦ç»† 50-200 ä¸ªå­—ç¬¦
- âœ… **å¿…è¦å…ƒç´ **: å¿…é¡»åŒ…å«æ¦‚è¦ã€è¯¦ç»†è¯´æ˜ã€Claude æ ‡è®°ä¸‰ä¸ªå…ƒç´ 
- âœ… **å®Œæ•´æ€§**: è®°è½½è§’è‰²ã€ä½¿ç”¨åœºæ™¯ã€æ³¨æ„äº‹é¡¹
- âœ… **è¯­è¨€è§„èŒƒ**: éµå¾ªå„è¯­è¨€çš„å®˜æ–¹é£æ ¼æŒ‡å—
- âœ… **å¼‚å¸¸**: é”™è¯¯å’Œå¼‚å¸¸çš„è¯´æ˜ï¼ˆå¦‚é€‚ç”¨ï¼‰
- âœ… **å‡†ç¡®æ€§**: åˆ†æå®ç°ï¼Œä»…è®°è½½åŸºäºäº‹å®çš„æè¿°

### æ³¨æ„äº‹é¡¹

**ğŸ”´ ç»å¯¹ç¦æ­¢äº‹é¡¹**ï¼š

- âŒ æ›´æ”¹æ–‡æ¡£æ³¨é‡Šä»¥å¤–çš„ä»£ç 
- âŒ æ¨æµ‹å®ç°ç»†èŠ‚ï¼ˆä»…è®°è½½äº‹å®ï¼‰
- âŒ è¿åè¯­è¨€è§„èŒƒçš„æ ¼å¼
- âŒ åˆ é™¤æˆ–æ›´æ”¹ç°æœ‰çš„ç±»å‹æ³¨è§£
- âŒ ä¸ç°æœ‰æ³¨é‡Šé‡å¤
- âŒ ä¸ºæµ‹è¯•æ–‡ä»¶æ·»åŠ ä¸ç¬¦åˆå­—ç¬¦æ•°æ ‡å‡†çš„æ³¨é‡Š

**æ‰§è¡Œå’ŒéªŒè¯**ï¼š

```bash
# è®°å½•æ‰§è¡Œç»“æœ
ADDED_COMMENTS=0
UPDATED_COMMENTS=0
ERRORS=0

# ä»ç°æœ‰æ³¨é‡Šè‡ªåŠ¨åˆ¤å®šè¯­è¨€
# æ£€æµ‹ä¸­æ–‡å­—ç¬¦åˆ™ä¸º zh-cnï¼Œå¦åˆ™ä¸º en
DOC_LANGUAGE="en"  # é»˜è®¤
if grep -r '[ä¸€-é¾¥]' --include="*.py" --include="*.js" --include="*.ts" --include="*.dart" --include="*.go" --include="*.rs" . 2>/dev/null | head -n 1; then
  DOC_LANGUAGE="zh-cn"
fi

# è‡ªåŠ¨æ£€æµ‹ç¼–ç¨‹è¯­è¨€å¹¶æ‰§è¡Œé™æ€åˆ†æ
if [ -f "*.py" ]; then
  pylint --disable=all --enable=missing-docstring .
elif [ -f "*.js" ] || [ -f "*.ts" ]; then
  eslint . --rule 'jsdoc/require-jsdoc: error'
elif [ -f "*.go" ]; then
  golint ./...
elif [ -f "*.rs" ]; then
  cargo doc --no-deps
elif [ -f "*.dart" ]; then
  melos analyze
fi

if [ $? -ne 0 ]; then
  echo "ğŸ”´ é”™è¯¯ï¼šé™æ€åˆ†æå¤±è´¥"
  exit 1
fi

# è¾“å‡ºæ‰§è¡Œæ‘˜è¦
echo "ğŸ“Š æ‰§è¡Œç»“æœï¼š"
echo "- æ–‡æ¡£è¯­è¨€ï¼š$DOC_LANGUAGE"
echo "- æ·»åŠ çš„æ³¨é‡Šï¼š$ADDED_COMMENTS æ¡"
echo "- æ›´æ–°çš„æ³¨é‡Šï¼š$UPDATED_COMMENTS æ¡"
echo "- é”™è¯¯æ•°ï¼š$ERRORS ä¸ª"
```

### æ‰§è¡ŒæˆåŠŸæ ‡å‡†

1. **å®Œæˆåˆ¤å®š**: æ»¡è¶³ä»¥ä¸‹æ‰€æœ‰æ¡ä»¶æ—¶æˆåŠŸ
   - è¯­è¨€ç‰¹å®šçš„é™æ€åˆ†ææ˜¾ç¤º PASSED
   - é”™è¯¯æ•°ä¸º 0
   - æ·»åŠ å’Œæ›´æ–°çš„æ³¨é‡Šéƒ½ç¬¦åˆæ ‡å‡†

2. **éƒ¨åˆ†æˆåŠŸ**: ä»¥ä¸‹æƒ…å†µ
   - é”™è¯¯æ•°å°‘äº 5 ä¸ª
   - 90% ä»¥ä¸Šç¬¦åˆæ ‡å‡†

3. **å¤±è´¥**: ä»¥ä¸‹æƒ…å†µ
   - é™æ€åˆ†ææ˜¾ç¤º FAILED
   - é”™è¯¯æ•°ä¸º 5 ä¸ªæˆ–ä»¥ä¸Š

### ä¸ Claude é…åˆ

```bash
# åˆ†ææ•´ä¸ªé¡¹ç›®ï¼ˆè‡ªåŠ¨åˆ¤å®šè¯­è¨€ï¼‰
find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.ts" \)
/update-doc-string
ã€ŒæŒ‰ç…§è¯­è¨€ç‰¹å®šçš„æœ€ä½³å®è·µæ›´æ–°è¿™ä¸ªé¡¹ç›®çš„ docstringã€
# â†’ å¦‚æœç°æœ‰æ³¨é‡Šä¸­æœ‰ä¸­æ–‡åˆ™ç”¨ jaï¼Œå¦åˆ™ç”¨ en

# æ˜ç¡®æŒ‡å®šè‹±æ–‡æ–‡æ¡£
/update-doc-string --lang en
"Update docstrings following language-specific best practices"

# æ˜ç¡®æŒ‡å®šä¸­æ–‡æ–‡æ¡£
/update-doc-string --lang zh-cn
ã€ŒæŒ‰ç…§è¯­è¨€ç‰¹å®šçš„æœ€ä½³å®è·µæ›´æ–°è¿™ä¸ªé¡¹ç›®çš„ docstringã€

# ä¸å¸¦æ ‡è®°æ‰§è¡Œï¼ˆè‡ªåŠ¨åˆ¤å®šè¯­è¨€ï¼‰
/update-doc-string --marker false
"Improve existing docstrings without adding Claude markers"

# è‹±æ–‡æ–‡æ¡£ï¼Œä¸å¸¦æ ‡è®°
/update-doc-string --lang en --marker false
"Improve existing docstrings without adding Claude markers"
```
