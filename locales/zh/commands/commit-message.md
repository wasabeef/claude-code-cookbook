## æäº¤æ¶ˆæ¯

ä»æš‚å­˜çš„æ›´æ”¹ï¼ˆgit diff --stagedï¼‰ç”Ÿæˆåˆé€‚çš„æäº¤æ¶ˆæ¯ã€‚ä»…ç”Ÿæˆæ¶ˆæ¯å¹¶å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼Œä¸æ‰§è¡Œ git å‘½ä»¤ã€‚

### ä½¿ç”¨æ–¹æ³•

```bash
/commit-message [é€‰é¡¹]
```

### é€‰é¡¹

- `--format <æ ¼å¼>` : æŒ‡å®šæ¶ˆæ¯æ ¼å¼ï¼ˆconventional, gitmoji, angularï¼‰
- `--lang <è¯­è¨€>` : å¼ºåˆ¶æŒ‡å®šæ¶ˆæ¯è¯­è¨€ï¼ˆen, zhï¼‰
- `--breaking` : æ£€æµ‹å¹¶è®°å½• Breaking Change

### åŸºæœ¬ç¤ºä¾‹

```bash
# ä»æš‚å­˜çš„æ›´æ”¹ç”Ÿæˆæ¶ˆæ¯ï¼ˆè‡ªåŠ¨åˆ¤å®šè¯­è¨€ï¼‰
# ä¸»è¦å€™é€‰ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿
/commit-message

# å¼ºåˆ¶æŒ‡å®šè¯­è¨€
/commit-message --lang zh
/commit-message --lang en

# æ£€æµ‹ Breaking Change
/commit-message --breaking
```

### å‰ææ¡ä»¶

**é‡è¦**: æ­¤å‘½ä»¤ä»…åˆ†ææš‚å­˜çš„æ›´æ”¹ã€‚éœ€è¦å…ˆä½¿ç”¨ `git add` æš‚å­˜æ›´æ”¹ã€‚

```bash
# å¦‚æœæ²¡æœ‰æš‚å­˜æ›´æ”¹ï¼Œä¼šæ˜¾ç¤ºè­¦å‘Š
$ /commit-message
æ²¡æœ‰æš‚å­˜çš„æ›´æ”¹ã€‚è¯·å…ˆæ‰§è¡Œ git addã€‚
```

### è‡ªåŠ¨å‰ªè´´æ¿åŠŸèƒ½

ç”Ÿæˆçš„ä¸»è¦å€™é€‰ä¼šä»¥ `git commit -m "æ¶ˆæ¯"` çš„å®Œæ•´æ ¼å¼è‡ªåŠ¨å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚å¯ä»¥ç›´æ¥åœ¨ç»ˆç«¯ç²˜è´´æ‰§è¡Œã€‚

**å®ç°æ³¨æ„äº‹é¡¹**:

- å°†æäº¤å‘½ä»¤ä¼ é€’ç»™ `pbcopy` æ—¶ï¼Œåº”ä¸æ¶ˆæ¯è¾“å‡ºåˆ†å¼€æ‰§è¡Œ
- ä½¿ç”¨ `printf` è€Œä¸æ˜¯ `echo` ä»¥é¿å…æœ«å°¾æ¢è¡Œ

### é¡¹ç›®è§„èŒƒè‡ªåŠ¨æ£€æµ‹

**é‡è¦**: å¦‚æœå­˜åœ¨é¡¹ç›®ç‰¹æœ‰çš„è§„èŒƒï¼Œå°†ä¼˜å…ˆä½¿ç”¨ã€‚

#### 1. CommitLint é…ç½®æ£€æŸ¥

ä»ä»¥ä¸‹æ–‡ä»¶è‡ªåŠ¨æ£€æµ‹é…ç½®ï¼š

- `commitlint.config.js`
- `commitlint.config.mjs`
- `commitlint.config.cjs`
- `commitlint.config.ts`
- `.commitlintrc.js`
- `.commitlintrc.json`
- `.commitlintrc.yml`
- `.commitlintrc.yaml`
- `package.json` çš„ `commitlint` éƒ¨åˆ†

```bash
# æœç´¢é…ç½®æ–‡ä»¶
find . -name "commitlint.config.*" -o -name ".commitlintrc.*" | head -1
```

#### 2. è‡ªå®šä¹‰ç±»å‹æ£€æµ‹

é¡¹ç›®ç‰¹æœ‰ç±»å‹ç¤ºä¾‹ï¼š

```javascript
// commitlint.config.mjs
export default {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [
      2,
      'always',
      [
        'feat', 'fix', 'docs', 'style', 'refactor', 'test', 'chore',
        'wip',      // è¿›è¡Œä¸­
        'hotfix',   // ç´§æ€¥ä¿®å¤
        'release',  // å‘å¸ƒ
        'deps',     // ä¾èµ–æ›´æ–°
        'config'    // é…ç½®æ›´æ”¹
      ]
    ]
  }
}
```

#### 3. è¯­è¨€è®¾ç½®æ£€æµ‹

```javascript
// é¡¹ç›®ä½¿ç”¨ä¸­æ–‡æ¶ˆæ¯æ—¶
export default {
  rules: {
    'subject-case': [0],  // ä¸ºæ”¯æŒä¸­æ–‡è€Œç¦ç”¨
    'subject-max-length': [2, 'always', 72]  // ä¸ºä¸­æ–‡è°ƒæ•´å­—ç¬¦æ•°é™åˆ¶
  }
}
```

#### 4. ç°æœ‰æäº¤å†å²åˆ†æ

```bash
# ä»æœ€è¿‘çš„æäº¤å­¦ä¹ ä½¿ç”¨æ¨¡å¼
git log --oneline -50 --pretty=format:"%s"

# ä½¿ç”¨ç±»å‹ç»Ÿè®¡
git log --oneline -100 --pretty=format:"%s" | \
grep -oE '^[a-z]+(\([^)]+\))?' | \
sort | uniq -c | sort -nr
```

### è¯­è¨€è‡ªåŠ¨åˆ¤å®š

æ ¹æ®ä»¥ä¸‹æ¡ä»¶è‡ªåŠ¨åˆ‡æ¢ä¸­æ–‡/è‹±æ–‡ï¼š

1. **CommitLint é…ç½®**ä¸­çš„è¯­è¨€è®¾ç½®
2. **git log åˆ†æ**çš„è‡ªåŠ¨åˆ¤å®š
3. **é¡¹ç›®æ–‡ä»¶**çš„è¯­è¨€è®¾ç½®
4. **æ›´æ”¹æ–‡ä»¶**ä¸­çš„æ³¨é‡Šå’Œå­—ç¬¦ä¸²åˆ†æ

é»˜è®¤ä¸ºè‹±æ–‡ã€‚åˆ¤å®šä¸ºä¸­æ–‡é¡¹ç›®æ—¶ç”Ÿæˆä¸­æ–‡æ¶ˆæ¯ã€‚

### æ¶ˆæ¯æ ¼å¼

#### Conventional Commits (é»˜è®¤)

```
<type>: <description>
```

**é‡è¦**: å¿…é¡»ç”Ÿæˆå•è¡Œæäº¤æ¶ˆæ¯ã€‚ä¸ç”Ÿæˆå¤šè¡Œæ¶ˆæ¯ã€‚

**æ³¨æ„**: å¦‚æœé¡¹ç›®æœ‰ç‰¹æœ‰è§„èŒƒï¼Œå°†ä¼˜å…ˆä½¿ç”¨ã€‚

### æ ‡å‡†ç±»å‹

**å¿…é¡»ç±»å‹**:

- `feat`: æ–°åŠŸèƒ½ï¼ˆç”¨æˆ·å¯è§çš„åŠŸèƒ½æ·»åŠ ï¼‰
- `fix`: ç¼ºé™·ä¿®å¤

**å¯é€‰ç±»å‹**:

- `build`: æ„å»ºç³»ç»Ÿæˆ–å¤–éƒ¨ä¾èµ–çš„æ›´æ”¹
- `chore`: å…¶ä»–æ›´æ”¹ï¼ˆä¸å½±å“å‘å¸ƒï¼‰
- `ci`: CI é…ç½®æ–‡ä»¶æˆ–è„šæœ¬çš„æ›´æ”¹
- `docs`: ä»…æ–‡æ¡£æ›´æ”¹
- `style`: ä¸å½±å“ä»£ç å«ä¹‰çš„æ›´æ”¹ï¼ˆç©ºæ ¼ã€æ ¼å¼ã€åˆ†å·ç­‰ï¼‰
- `refactor`: æ—¢ä¸ä¿®å¤ç¼ºé™·ä¹Ÿä¸æ·»åŠ åŠŸèƒ½çš„ä»£ç æ›´æ”¹
- `perf`: æ€§èƒ½æ”¹è¿›
- `test`: æ·»åŠ æˆ–ä¿®æ­£æµ‹è¯•

### è¾“å‡ºç¤ºä¾‹ï¼ˆä¸­æ–‡é¡¹ç›®ï¼‰

```bash
$ /commit-message

ğŸ“ æäº¤æ¶ˆæ¯å»ºè®®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ ä¸»è¦å€™é€‰:
feat: å®ç°åŸºäº JWT çš„è®¤è¯ç³»ç»Ÿ

ğŸ“‹ å¤‡é€‰æ–¹æ¡ˆ:
1. feat: æ·»åŠ  JWT ä»¤ç‰Œçš„ç”¨æˆ·è®¤è¯
2. fix: è§£å†³è®¤è¯ä¸­é—´ä»¶çš„ä»¤ç‰ŒéªŒè¯é”™è¯¯
3. refactor: å°†è®¤è¯é€»è¾‘æå–åˆ°ç‹¬ç«‹æ¨¡å—

âœ… `git commit -m "feat: å®ç°åŸºäº JWT çš„è®¤è¯ç³»ç»Ÿ"` å·²å¤åˆ¶åˆ°å‰ªè´´æ¿
```

**å®ç°ç¤ºä¾‹ï¼ˆä¿®æ­£ç‰ˆï¼‰**:

```bash
# å…ˆå°†æäº¤å‘½ä»¤å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼ˆæ— æ¢è¡Œï¼‰
printf 'git commit -m "%s"' "$COMMIT_MESSAGE" | pbcopy

# ç„¶åæ˜¾ç¤ºæ¶ˆæ¯
cat << EOF
ğŸ“ æäº¤æ¶ˆæ¯å»ºè®®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ ä¸»è¦å€™é€‰:
$COMMIT_MESSAGE

ğŸ“‹ å¤‡é€‰æ–¹æ¡ˆ:
1. ...
2. ...
3. ...

âœ… `git commit -m "$COMMIT_MESSAGE"` å·²å¤åˆ¶åˆ°å‰ªè´´æ¿
EOF
```

### Breaking Change æ£€æµ‹

è‡ªåŠ¨æ£€æµ‹å¯èƒ½çš„ç ´åæ€§æ›´æ”¹ï¼š

- API ç­¾åæ›´æ”¹
- é…ç½®æ ¼å¼æ›´æ”¹
- ä¾èµ–ä¸»ç‰ˆæœ¬å‡çº§
- æ•°æ®åº“æ¶æ„æ›´æ”¹
- è¡Œä¸ºä¸å…¼å®¹æ›´æ”¹

```bash
$ /commit-message --breaking

âš ï¸ æ£€æµ‹åˆ° Breaking Change:
- API ç«¯ç‚¹ä» /api/v1/users æ›´æ”¹ä¸º /api/v2/users
- åˆ é™¤äº†å·²å¼ƒç”¨çš„é…ç½®é€‰é¡¹ `legacy_mode`

feat!: è¿ç§»åˆ° API v2 å¹¶åˆ é™¤é—ç•™æ”¯æŒ
```

### é¡¹ç›®ç‰¹å®šè§„åˆ™

å¦‚æœæ£€æµ‹åˆ°é¡¹ç›®ç‰¹å®šè§„åˆ™ï¼Œä¼šè‡ªåŠ¨åº”ç”¨ï¼š

```bash
# å¦‚æœé¡¹ç›®ä½¿ç”¨ scope
feat(auth): æ·»åŠ åŒå› ç´ è®¤è¯

# å¦‚æœé¡¹ç›®ä½¿ç”¨ issue ç¼–å·
fix: ä¿®å¤ç™»å½•é‡å®šå‘é—®é¢˜ (#123)

# å¦‚æœé¡¹ç›®ä½¿ç”¨ gitmoji
âœ¨ feat: æ·»åŠ æ·±è‰²æ¨¡å¼æ”¯æŒ
```

### æœ€ä½³å®è·µ

1. **ç®€æ´æ˜äº†**: ä½¿ç”¨ç¥ˆä½¿è¯­æ°”ï¼Œè¯´æ˜åšäº†ä»€ä¹ˆ
2. **å…³æ³¨åŸå› **: è¯´æ˜ä¸ºä»€ä¹ˆåšè¿™ä¸ªæ›´æ”¹ï¼Œè€Œä¸ä»…æ˜¯æ€ä¹ˆåš
3. **å¼•ç”¨é—®é¢˜**: å¦‚æœç›¸å…³ï¼Œå¼•ç”¨ issue æˆ– PR ç¼–å·
4. **ä¿æŒä¸€è‡´**: éµå¾ªé¡¹ç›®å·²æœ‰çš„æäº¤æ¶ˆæ¯é£æ ¼

### é«˜çº§åŠŸèƒ½

#### æ‰¹é‡æäº¤å»ºè®®

å¦‚æœæš‚å­˜çš„æ›´æ”¹è¿‡å¤šä¸”ä¸ç›¸å…³ï¼Œå»ºè®®æ‹†åˆ†ï¼š

```bash
$ /commit-message

âš ï¸ æ£€æµ‹åˆ°å¤šä¸ªä¸ç›¸å…³çš„æ›´æ”¹ã€‚å»ºè®®æ‹†åˆ†ä¸ºå¤šä¸ªæäº¤ï¼š

1. è®¤è¯ç›¸å…³æ›´æ”¹:
   feat: æ·»åŠ  OAuth2 è®¤è¯æ”¯æŒ
   æ–‡ä»¶: auth/*.js

2. UI æ”¹è¿›:
   style: æ›´æ–°æŒ‰é’®æ ·å¼å’Œé¢œè‰²ä¸»é¢˜
   æ–‡ä»¶: components/Button.*

3. æ–‡æ¡£æ›´æ–°:
   docs: æ›´æ–° API æ–‡æ¡£å’Œç¤ºä¾‹
   æ–‡ä»¶: docs/*.md
```

#### æ™ºèƒ½ç±»å‹æ¨è

æ ¹æ®æ–‡ä»¶æ›´æ”¹å†…å®¹æ™ºèƒ½æ¨èç±»å‹ï¼š

- `.test.js` æ›´æ”¹ â†’ `test:`
- `package.json` æ›´æ”¹ â†’ `deps:` æˆ– `build:`
- `.github/workflows/` æ›´æ”¹ â†’ `ci:`
- `README.md` æ›´æ”¹ â†’ `docs:`
- æ€§èƒ½ç›¸å…³å…³é”®è¯ â†’ `perf:`
