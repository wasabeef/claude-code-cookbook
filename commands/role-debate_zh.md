## 角色辩论

让具有不同专业背景的角色进行讨论，权衡利弊并得出最佳解决方案的命令。

### 使用方法

```bash
/role-debate <角色1>,<角色2> [议题]
/role-debate <角色1>,<角色2>,<角色3> [议题]
```

### 基本示例

```bash
# 安全性 vs 性能的权衡
/role-debate security,performance
「关于JWT令牌的有效期设置」

# 可用性 vs 安全性的平衡
/role-debate frontend,security
「关于两步验证的UX优化」

# 技术选型讨论
/role-debate architect,mobile
「关于React Native vs Flutter的选择」

# 三方讨论
/role-debate architect,security,performance
「关于微服务化的利弊」
```

### 讨论的基本原则

#### 建设性讨论的要点

- **相互尊重**: 尊重其他角色的专业性和观点
- **事实依据**: 基于数据和证据而非情绪化反驳
- **解决导向**: 追求更好的解决方案而非为批判而批判
- **注重实施**: 考虑可行性而非空谈理想

#### 论据的质量要求

- **官方文档**: 引用标准、指南和官方文档
- **实证案例**: 具体引用成功或失败案例
- **定量评估**: 尽可能用数值和指标进行比较
- **时间维度**: 评估短期、中期和长期影响

#### 讨论伦理

- **诚实性**: 承认自身专业领域的局限性
- **开放性**: 对新信息和观点保持灵活性
- **透明度**: 明确说明判断依据和前提条件
- **责任性**: 提及提案的实施风险

### 讨论流程

### 阶段1: 初始立场表明

各角色从专业角度独立发表意见

- 提出推荐方案
- 明确依据的标准和文档
- 说明预期风险和挑战
- 定义成功指标

### 阶段2: 相互讨论与反驳

角色间的交叉讨论

- 对其他角色提案的建设性反驳
- 指出被忽视的视角
- 明确权衡关系
- 提出替代方案

### 阶段3: 妥协点探索

探索可行的解决方案

- 评估各视角的重要性
- 探讨双赢解决方案
- 考虑阶段性实施方法
- 研究风险缓解措施

### 阶段4: 综合结论

确定最终推荐意见

- 达成一致的解决方案
- 实施路线图
- 成功指标和测量方法
- 未来审查要点

### 输出格式示例

### 两角色讨论的情况

```
角色辩论: Security vs Performance
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

议题: JWT令牌的有效期设置

Security角色的主张:
「推荐15分钟的短期有效期」

依据:
- 符合OWASP JWT安全 cheat sheet
- 最小化令牌泄露时的受害时间窗口
- 限制攻击者的可用时间

担忧事项:
- 长期有效期会使攻击风险呈指数级增长
- 金融行业合规要求必须短期

成功指标:
- 安全事件发生率 < 0.1%
- 平均攻击检测时间 < 5分钟

Performance角色的反驳:
「推荐2小时的有效期」

依据:
- 参考Google OAuth 2.0最佳实践
- 避免频繁重新认证导致的服务器负载增加
- 最小化用户体验影响(工作中断)

担忧事项:
- 每15分钟重新认证会使API负载增加8倍
- 移动环境中连接断开频繁

成功指标:
- API响应时间 < 200ms
- 服务器CPU使用率 < 60%

相互讨论:
Security → Performance:
「相比服务器负载，安全漏洞造成的业务损失更为严重。
例如: Equifax事件损失7亿美元」

Performance → Security:
「可以通过刷新令牌机制实现两者平衡。
通过后台更新确保安全性而不损害UX」

Security → Performance:
「刷新令牌也是攻击目标，需以适当实现为前提」

Performance → Security:
「建议采取阶段性方法。常规操作30分钟，敏感操作15分钟」

妥协点探索:
共同理解:
- 需要平衡用户体验和安全性
- 根据风险级别灵活应对
- 现实考虑实施和运营成本

双赢要素:
- 利用刷新令牌机制
- 逐步引入基于风险的认证
- 通过自动登出功能补充

综合结论:
「30分钟有效期 + 刷新令牌 + 基于风险的认证」

实施详情:
1. 访问令牌: 30分钟有效期
2. 刷新令牌: 7天有效期
3. 高风险操作: 15分钟强制重新认证
4. 无操作30分钟自动登出

阶段性实施:
第1-2周: 基本30分钟令牌实现
第3-4周: 添加刷新令牌机制
第2个月: 引入基于风险的认证

成功指标:
- 安全: 事件发生率 < 0.1%
- 性能: API负载增长率 < 20%
- UX: 用户满意度 > 85%

未来审查:
- 3个月后: 评估实际攻击模式和负载状况
- 6个月后: 考虑转向更精细的基于风险的认证
```

### 三角色讨论的情况

```
角色辩论: Architect vs Security vs Performance
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

议题: 微服务化的利弊

Architect角色的主张:
「推荐阶段性微服务化」
依据: 明确领域边界、独立部署、技术选择自由度

Security角色的担忧:
「服务间通信的安全复杂化」
依据: API Gateway、mTLS、分布式认证的管理成本
```