## 更新文档字符串

系统管理多语言支持的docstring/注释，维护高质量文档。

### 使用方法

```bash
# 自动检测语言并执行
「请为没有docstring的类和函数添加注释，并更新不符合标准的注释」

# 指定语言执行
/update-doc-string --lang python
「请按PEP 257标准更新Python文件的docstring」

# 特定目录的文档维护
「请为src/components/下的函数添加JSDoc」
```

### 选项

- `--lang <en|ja>`: 文档语言（默认：从现有注释自动判断，无则en）
- `--style <风格>`: 指定文档风格（各语言有默认值）
- `--marker <true|false>`: 是否添加Claude标记（默认：true）

### 基本示例

```bash
# 1. 分析目标文件（自动检测编程语言）
find . -type f \( -name "*.py" -o -name "*.js" -o -name "*.ts" -o -name "*.dart" -o -name "*.go" -o -name "*.rs" \) | grep -v test
「请找出缺少docstring的元素（注释行数为0或少于30个字符）」

# 2. 添加文档（自动判断语言）
「请为找出的元素添加包含语言特定必要要素的docstring」
# → 现有注释有日语则用日语，否则用英语

# 3. 添加文档（明确指定英语）
/update-doc-string --lang en
「Add docstrings with required elements to the identified elements」

# 4. 检查标记
「请确认所有添加或更新的docstring都包含Claude标记」
```

### 执行步骤

#### 1. 目标元素的优先级

1. 🔴 **最高优先级**：没有docstring/注释的元素（注释行数为0）
2. 🟡 **次优先级**：不符合标准的元素（少于30个字符或缺少必要要素）
3. 🟢 **检查对象**：没有Claude标记的现有注释

**目标元素（语言通用）**：

- Class/类定义
- Function/函数、方法
- Module/模块（Python, Go）
- Enum/枚举类型
- Interface/接口（TypeScript, Go）

#### 2. 按语言的编写规则

**Python (PEP 257)**：

```python
# 日语版（默认）
def calculate_total(items: List[Item]) -> float:
    """计算物品列表的总金额。（30-60字符）

    将每个物品的价格和数量相乘，返回含税总价。
    空列表时返回0.0。（50-200字符）

    Args:
        items: 计算对象的物品列表

    Returns:
        含税总金额

    Generated by Claude 🤖
    """

# 英语版（--lang en）
def calculate_total(items: List[Item]) -> float:
    """Calculate the total amount for a list of items. (30-60 chars)

    Multiplies the price and quantity of each item and returns
    the total with tax. Returns 0.0 for empty lists. (50-200 chars)

    Args:
        items: List of items to calculate

    Returns:
        Total amount with tax

    Generated by Claude 🤖
    """
```

**JavaScript/TypeScript (JSDoc)**：

```javascript
/**
 * 显示用户资料的组件。（30-60字符）
 *
 * 显示头像图片、用户名和状态信息，
 * 点击时跳转到资料详情页面。（50-200字符）
 *
 * @param {Object} props - 组件属性
 * @param {string} props.userId - 用户ID
 * @param {boolean} [props.showStatus=true] - 状态显示标志
 * @returns {JSX.Element} 渲染后的组件
 *
 * @generated by Claude 🤖
 */
const UserProfile = ({ userId, showStatus = true }) => {
```

**Go**：

```go
// CalculateTotal 计算物品列表的总金额。（30-60字符）
//
// 将每个物品的价格和数量相乘，返回含税总价。
// 空切片时返回0.0。（50-200字符）
//
// Generated by Claude 🤖
func CalculateTotal(items []Item) float64 {
```

**Rust**：

```rust
/// 计算物品列表的总金额。（30-60字符）
///
/// 将每个物品的价格和数量相乘，返回含税总价。
/// 空向量时返回0.0。（50-200字符）
///
/// Generated by Claude 🤖
pub fn calculate_total(items: &[Item]) -> f64 {
```

**Dart (DartDoc)**：

```dart
/// 显示用户资料的Widget组件。（30-60字符）
///
/// 垂直排列头像图片、用户名和状态信息，
/// 点击时跳转到资料详情页面。（50-200字符）
///
/// Generated by Claude 🤖
class UserProfileWidget extends StatelessWidget {
```

#### 3. 现有内容保留规则

1. **现有注释符合标准**：原样保留（不新增）
   - 标准：30字符以上且包含必要元素（概要、详细、标记）
2. **现有注释不符合标准**：完全替换（不重复）
3. **无现有注释**：添加新注释

**需保留的重要信息**：

- URL或链接：`See also:`, `@see`, `参照:`等
- TODO注释：`TODO:`, `FIXME:`, `XXX:`格式
- 注意事项：`Note:`, `Warning:`, `注意:`等
- 使用示例：`Example:`, `例:`, `# Examples`等
- 现有参数、返回值说明

### 语言设置

```yaml
# 语言默认设置
languages:
  python:
    style: "google"  # google, numpy, sphinx
    indent: 4
    quotes: '"""

  javascript:
    style: "jsdoc"
    indent: 2
    prefix: "/**"
    suffix: "*/"

  typescript:
    style: "tsdoc"
    indent: 2
    prefix: "/**"
    suffix: "*/"

  go:
    style: "godoc"
    indent: 0
    prefix: "//"

  rust:
    style: "rustdoc"
    indent: 0
    prefix: "///"

  dart: