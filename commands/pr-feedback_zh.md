## PR反馈

高效处理Pull Request的评审意见，通过错误分析三阶段方法实现根本解决。

### 使用方法

```bash
# 获取并分析评审意见
gh pr view --comments
「请按优先级分类评审意见并制定应对计划」

# 详细分析错误相关评论
gh pr checks
「请用三阶段方法分析CI错误并确定根本原因」

# 修复完成后的质量检查
npm test && npm run lint
「修复已完成，请检查回归测试和代码质量」
```

### 基本示例

```bash
# 执行评论分类
gh pr view 123 --comments | head -20
"请将评审意见分为must/imo/nits/q类别并确定应对顺序"

# 收集错误信息
npm run build 2>&1 | tee error.log
"请确定构建错误的根本原因并提出适当的修复方法"

# 确认修复实现
git diff HEAD~1
"请评估此修复是否适当解决了评审指出的问题"
```

### 评论分类体系

```
🔴 must: 必须修复
├─ 安全问题
├─ 功能错误
├─ 违反设计原则
└─ 违反规范

🟡 imo: 改进建议
├─ 更好的实现方法
├─ 性能改进
├─ 提高可读性
└─ 重构建议

🟢 nits: 轻微指出
├─ 拼写错误修正
├─ 缩进调整
├─ 添加注释
└─ 命名微调

🔵 q: 问题/确认
├─ 确认实现意图
├─ 明确规范
├─ 设计决策背景
└─ 探讨替代方案
```

### 错误分析三阶段方法

#### 阶段1: 信息收集

**必须执行**

- 完整获取错误信息
- 确认堆栈跟踪
- 确定重现条件

**推荐执行**

- 收集环境信息
- 最近的变更历史
- 确认相关日志

#### 阶段2: 根本原因分析

- 应用5 Whys分析
- 跟踪依赖关系
- 确认环境差异
- 创建最小重现代码

#### 阶段3: 解决方案实现

- 即时处理（热修复）
- 根本解决（本质修复）
- 预防措施（防止复发）

### 应对流程

1. **评论分析**: 按优先级分类
2. **修复计划**: 确定应对顺序
3. **逐步修复**: Critical → High → Medium → Low
4. **质量确认**: 测试、代码检查、构建
5. **进度报告**: 说明具体修复内容

### 修复后的确认

```bash
# 基本检查
npm test
npm run lint
npm run build

# 回归测试
npm run test:e2e

# 代码质量
npm run test:coverage
```

### 回复模板

**修复完成报告**

```markdown
@reviewer 感谢您的指出。
修复已完成：

- [具体修复内容]
- [测试结果]
- [确认方法]
```

**技术决策说明**

```markdown
实现背景：[原因]
考虑的替代方案：[选项和决策依据]
采用方案的优点：[优势]
```

### 注意事项

- **遵守优先级**: 按Critical → High → Medium → Low顺序处理
- **测试优先**: 修复前确认回归测试
- **明确报告**: 具体描述修复内容和确认方法
- **建设性对话**: 基于技术依据的礼貌沟通
```