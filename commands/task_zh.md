## 任务

启动专用代理，自主执行复杂的搜索、调查和分析任务。通过组合多个工具进行大规模信息处理，注重上下文效率。

### 使用方法

```bash
# 请Claude执行任务
「用Task调查[课题]」
```

### 任务的特点

**自主执行**

- 组合多个工具自动执行
- 阶段性信息收集与分析
- 结果整合与结构化报告

**高效信息处理**

- 优化上下文消耗
- 大规模文件搜索与解析
- 从外部信息源收集数据

**质量保证**

- 信息源可靠性检查
- 多视角验证
- 自动补充缺失信息

### 基本示例

```bash
# 复杂代码库调查
「用Task调查这个功能在哪些文件中实现」

# 大规模文件搜索
「用Task找出配置文件中的不一致」

# 收集外部信息
「用Task调查最新AI技术趋势」
```

### 与Claude的协作

```bash
# 复杂问题分析
「用Task分析内存泄漏原因，包括性能分析结果和日志」

# 依赖关系调查
「用Task调查这个npm包的 vulnerabilities」

# 竞争分析
「用Task调查竞争服务的API规范」

# 架构分析
「用Task分析这个微服务的依赖关系」
```

### 与其他命令的区别

#### Task vs 其他命令

| 命令 | 主要用途 | 执行方式 | 信息收集 |
|------|----------|----------|----------|
| **Task** | 调查、分析、搜索 | 自主执行 | 多源 |
| ultrathink | 深度思考、判断 | 结构化思考 | 以现有知识为中心 |
| sequential-thinking | 问题解决、设计 | 阶段性思考 | 按需 |
| plan | 制定实施计划 | 审批流程 | 需求分析 |

#### 判断流程图

```
需要信息收集？
├─ 是 → 多源、大规模？
│       ├─ 是 → **Task**
│       └─ 否 → 普通问题
└─ 否 → 需要深度思考？
         ├─ 是 → ultrathink/sequential-thinking
         └─ 否 → 普通问题
```

### 有效场景与无效场景

**有效场景**

- 复杂代码库调查（依赖关系、架构分析）
- 大规模文件搜索（特定实现模式、配置文件）
- 外部信息收集与整理（技术趋势、库调查）
- 多源信息整合（日志分析、指标分析）
- 重复性调查工作（安全审计、技术债务调查）
- 需避免上下文消耗的大规模分析

**无效场景**

- 简单问题或已有知识可回答的内容
- 短时间可完成的单次工作
- 需要对话确认、咨询的工作
- 实现或设计决策（plan或思考类命令更适合）

### 分类详细示例

#### 系统分析与调查

```bash
# 复杂系统分析
「用Task找出电商网站的瓶颈，调查数据库、API和前端整体」

# 架构分析
「用Task分析这个微服务的依赖关系，包括API通信和数据流」

# 技术债务调查
「用Task分析遗留代码的技术债务，包括重构优先级」
```

#### 安全与合规

```bash
# 安全审计
「用Task调查这个应用的漏洞，基于OWASP Top 10」

# 许可证调查
「用Task调查项目依赖的许可证问题」

# 配置文件审计
「用Task找出安全配置的不一致，包括环境间差异」
```

#### 性能与优化

```bash
# 性能分析
「用Task找出应用中的慢查询，包括执行计划和优化方案」

# 资源使用调查
「用Task调查内存泄漏原因，包括性能分析结果和代码解析」

# 包大小分析
「用Task调查前端包大小问题，包括优化建议」
```

#### 外部信息收集

```bash
# 技术趋势调查
「用Task调查2024年JavaScript框架趋势」

# 竞争分析
「用Task调查竞争服务的API规范，包括功能比较表」

# 库评估
「用Task比较状态管理库，包括性能和学习成本」
```

### 执行流程与质量保证

#### Task执行流程

```
1. 初始分析
   ├─ 分解课题并确定调查范围
   ├─ 选择必要工具和信息源
   └─ 制定执行计划

2. 信息收集
   ├─ 文件搜索、代码解析
   ├─ 收集外部信息
   └─ 数据结构化

3. 分析与整合
   ├─ 分析收集信息的关联性
   ├─ 识别模式和问题点
   └─ 验证假设

4. 报告与建议
   ├─ 结构化结果
   ├─ 提出改善建议
   └─ 提示下一步行动
```

#### 质量保证

- **信息源可靠性检查**: 通过多源确认事实
- **完整性检查**: 检查是否有调查对象遗漏
- **一致性验证**: 确认矛盾信息的一致性
- **实用性评估**: 评估建议的可行性和效果

### 错误处理与限制事项

#### 常见限制

- **外部API使用限制**: 速率限制和认证错误
- **大文件处理限制**: 内存和超时限制
- **访问权限问题**: 文件和目录访问限制

#### 错误应对

- **部分结果报告**: 仅使用可获取信息进行分析
- **替代方案建议**: 在限制条件下的替代调查方法
```