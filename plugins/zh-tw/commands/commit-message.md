## æäº¤æ¶ˆæ¯

å¾æš‚å­˜çš„æ›´æ”¹ (git diff --staged) ç”Ÿæˆåˆé©çš„æäº¤æ¶ˆæ¯ã€‚ä»…ç”Ÿæˆæ¶ˆæ¯ä¸¦å¾©åˆ¶åˆ°å‰ªè´´æ¿ï¼Œä¸åŸ·è¡Œ git å‘½ä»¤ã€‚

### ä½¿ç”¨æ–¹æ³•

```bash
/commit-message [é¸é …]
```

### é¸é …

- `--format <æ ¼å¼>` : æŒ‡å®šæ¶ˆæ¯æ ¼å¼ (conventional, gitmoji, angular)
- `--lang <èªè¨€>` : å¼·åˆ¶æŒ‡å®šæ¶ˆæ¯èªè¨€ (en, zh-tw)
- `--breaking` : æª¢æ¸¬ä¸¦è¨˜éŒ„ Breaking Change

### åŸºæœ¬ç¤ºä¾‹

```bash
# å¾æš‚å­˜çš„æ›´æ”¹ç”Ÿæˆæ¶ˆæ¯ (è‡ªå‹•åˆ¤å®šèªè¨€)
# ä¸»è¦å€™é¸æœƒè‡ªå‹•å¾©åˆ¶åˆ°å‰ªè´´æ¿
/commit-message

# å¼·åˆ¶æŒ‡å®šèªè¨€
/commit-message --lang zh-tw
/commit-message --lang en

# æª¢æ¸¬ Breaking Change
/commit-message --breaking
```

### å‰ææ¢ä»¶

**é‡è¦**: æ­¤å‘½ä»¤ä»…åˆ†ææš‚å­˜çš„æ›´æ”¹ã€‚éœ€è¦å…ˆä½¿ç”¨ `git add` æš‚å­˜æ›´æ”¹ã€‚

```bash
# å¦‚æœæ²¡æœ‰æš‚å­˜æ›´æ”¹ï¼Œæœƒé¡¯ç¤ºè­¦å‘Š
$ /commit-message
æ²¡æœ‰æš‚å­˜çš„æ›´æ”¹ã€‚è«‹å…ˆåŸ·è¡Œ git addã€‚
```

### è‡ªå‹•å‰ªè´´æ¿åŠŸèƒ½

ç”Ÿæˆçš„ä¸»è¦å€™é¸æœƒä»¥ `git commit -m "æ¶ˆæ¯"` çš„å®Œæ•´æ ¼å¼è‡ªå‹•å¾©åˆ¶åˆ°å‰ªè´´æ¿ã€‚å¯ä»¥ç›´æ¥åœ¨çµ‚ç«¯ç²˜è´´åŸ·è¡Œã€‚

**å¯¦ç¾æ³¨æ„äº‹é …**:

- å°‡æäº¤å‘½ä»¤å‚³éçµ¦ `pbcopy` æ™‚ï¼Œæ‡‰èˆ‡æ¶ˆæ¯è¼¸å‡ºåˆ†é–‹åŸ·è¡Œ
- ä½¿ç”¨ `printf` è€Œä¸æ˜¯ `echo` ä»¥é¿å…æœ«å°¾æ›è¡Œ

### é …ç›®è¦ç¯„è‡ªå‹•æª¢æ¸¬

**é‡è¦**: å¦‚æœå­˜åœ¨é …ç›®ç‰¹æœ‰çš„è¦ç¯„ï¼Œå°‡å„ªå…ˆä½¿ç”¨ã€‚

#### 1. CommitLint é…ç½®æª¢æŸ¥

å¾ä»¥ä¸‹æ–‡ä»¶è‡ªå‹•æª¢æ¸¬é…ç½®ï¼š

- `commitlint.config.js`
- `commitlint.config.mjs`
- `commitlint.config.cjs`
- `commitlint.config.ts`
- `.commitlintrc.js`
- `.commitlintrc.json`
- `.commitlintrc.yml`
- `.commitlintrc.yaml`
- `package.json` çš„ `commitlint` éƒ¨åˆ†

```bash
# æœç´¢é…ç½®æ–‡ä»¶
find . -name "commitlint.config.*" -o -name ".commitlintrc.*" | head -1
```

#### 2. è‡ªå®šç¾©é¡å‹æª¢æ¸¬

é …ç›®ç‰¹æœ‰é¡å‹ç¤ºä¾‹ï¼š

```javascript
// commitlint.config.mjs
export default {
  extends: ["@commitlint/config-conventional"],
  rules: {
    "type-enum": [
      2,
      "always",
      [
        "feat",
        "fix",
        "docs",
        "style",
        "refactor",
        "test",
        "chore",
        "wip", // é€²è¡Œä¸­
        "hotfix", // ç´§æ€¥ä¿®å¾©
        "release", // ç™¼å¸ƒ
        "deps", // ä¾è³´æ›´æ–°
        "config", // é…ç½®æ›´æ”¹
      ],
    ],
  },
};
```

#### 3. èªè¨€è¨­ç½®æª¢æ¸¬

```javascript
// é …ç›®ä½¿ç”¨ç¹ä½“å­—ä¸­æ–‡æ¶ˆæ¯æ™‚
export default {
  rules: {
    "subject-case": [0], // ç‚ºæ”¯æŒç¹ä½“å­—ä¸­æ–‡è€Œç¦ç”¨
    "subject-max-length": [2, "always", 72], // ç‚ºç¹ä½“å­—ä¸­æ–‡èª¿æ•´å­—ç¬¦æ•¸é™åˆ¶
  },
};
```

#### 4. ç¾æœ‰æäº¤æ­·å²åˆ†æ

```bash
# å¾æœ€è¿‘çš„æäº¤å­¸ç¿’ä½¿ç”¨æ¨¡å¼
git log --oneline -50 --pretty=format:"%s"

# ä½¿ç”¨é¡å‹çµ±è¨ˆ
git log --oneline -100 --pretty=format:"%s" | \
grep -oE '^[a-z]+(\([^)]+\))?' | \
sort | uniq -c | sort -nr
```

### èªè¨€è‡ªå‹•åˆ¤å®š

æ ¹æ“šä»¥ä¸‹æ¢ä»¶è‡ªå‹•åˆ‡æ›ç¹ä½“å­—ä¸­æ–‡/è‹±æ–‡ï¼š

1. **CommitLint é…ç½®**ä¸­çš„èªè¨€è¨­ç½®
2. **git log åˆ†æ**çš„è‡ªå‹•åˆ¤å®š
3. **é …ç›®æ–‡ä»¶**çš„èªè¨€è¨­ç½®
4. **æ›´æ”¹æ–‡ä»¶**ä¸­çš„æ³¨é‡‹å’Œå­—ç¬¦ä¸²åˆ†æ

é»˜èªç‚ºè‹±æ–‡ã€‚åˆ¤å®šç‚ºç¹ä½“å­—ä¸­æ–‡é …ç›®æ™‚ç”Ÿæˆç¹ä½“å­—ä¸­æ–‡æ¶ˆæ¯ã€‚

### æ¶ˆæ¯æ ¼å¼

#### Conventional Commits (é»˜èª)

```text
<type>: <description>
```

**é‡è¦**: å¿…é¡»ç”Ÿæˆå–®è¡Œæäº¤æ¶ˆæ¯ã€‚ä¸ç”Ÿæˆå¤šè¡Œæ¶ˆæ¯ã€‚

**æ³¨æ„**: å¦‚æœé …ç›®æœ‰ç‰¹æœ‰è¦ç¯„ï¼Œå°‡å„ªå…ˆä½¿ç”¨ã€‚

### æ¨™æº–é¡å‹

**å¿…é¡»é¡å‹**:

- `feat`: æ–°åŠŸèƒ½ (ç”¨æˆ¶å¯è¦‹çš„åŠŸèƒ½æ·»åŠ )
- `fix`: ç¼ºé™·ä¿®å¾©

**å¯é¸é¡å‹**:

- `build`: æ§‹å»ºç³»çµ±æˆ–å¤–éƒ¨ä¾è³´çš„æ›´æ”¹
- `chore`: å…¶ä»–æ›´æ”¹ (ä¸å½±éŸ¿ç™¼å¸ƒ)
- `ci`: CI é…ç½®æ–‡ä»¶æˆ–è…³æœ¬çš„æ›´æ”¹
- `docs`: ä»…æ–‡æª”æ›´æ”¹
- `style`: ä¸å½±éŸ¿ä»£ç¢¼å«ç¾©çš„æ›´æ”¹ (ç©ºæ ¼ã€æ ¼å¼ã€åˆ†å·ç­‰)
- `refactor`: æ—¢ä¸ä¿®å¾©ç¼ºé™·ä¹Ÿä¸æ·»åŠ åŠŸèƒ½çš„ä»£ç¢¼æ›´æ”¹
- `perf`: æ€§èƒ½æ”¹é€²
- `test`: æ·»åŠ æˆ–æ›´æ­£æ¸¬è©¦

### è¼¸å‡ºç¤ºä¾‹ (è‹±æ–‡é …ç›®)

```bash
$ /commit-message

ğŸ“ æäº¤æ¶ˆæ¯å»ºè­°
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ ä¸»è¦å€™é¸:
feat: implement JWT-based authentication system

ğŸ“‹ å‚™é¸æ–¹æ¡ˆ:
1. feat: add user authentication with JWT tokens
2. fix: resolve token validation error in auth middleware
3. refactor: extract auth logic into separate module

âœ… `git commit -m "feat: implement JWT-based authentication system"` å·²å¾©åˆ¶åˆ°å‰ªè´´æ¿
```

**å¯¦ç¾ç¤ºä¾‹ (æ›´æ­£ç‰ˆ)**:

```bash
# å…ˆå°‡æäº¤å‘½ä»¤å¾©åˆ¶åˆ°å‰ªè´´æ¿ (ç„¡æ›è¡Œ)
printf 'git commit -m "%s"' "$COMMIT_MESSAGE" | pbcopy

# ç„¶å¾Œé¡¯ç¤ºæ¶ˆæ¯
cat << EOF
ğŸ“ æäº¤æ¶ˆæ¯å»ºè­°
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ ä¸»è¦å€™é¸:
$COMMIT_MESSAGE

ğŸ“‹ å‚™é¸æ–¹æ¡ˆ:
1. ...
2. ...
3. ...

âœ… `git commit -m "$COMMIT_MESSAGE"` å·²å¾©åˆ¶åˆ°å‰ªè´´æ¿
EOF
```

### è¼¸å‡ºç¤ºä¾‹ (ç¹ä½“å­—ä¸­æ–‡é …ç›®)

```bash
$ /commit-message

ğŸ“ æäº¤æ¶ˆæ¯å»ºè­°
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ¨ ä¸»è¦å€™é¸:
feat: å¯¦ä½œ JWT èªè­‰ç³»çµ±

ğŸ“‹ å‚™é¸æ–¹æ¡ˆ:
1. feat: æ–°å¢åŸºæ–¼ JWT ä»¤ç‰Œçš„ä½¿ç”¨è€…èªè­‰
2. fix: è§£æ±ºèªè­‰ä¸­ä»‹è»Ÿé«”çš„ä»¤ç‰Œé©—è­‰éŒ¯èª¤
3. docs: å°‡èªè­‰é‚è¼¯åˆ†é›¢åˆ°ç¨ç«‹æ¨¡çµ„

âœ… `git commit -m "feat: å¯¦ä½œ JWT èªè­‰ç³»çµ±"` å·²å¾©åˆ¶åˆ°å‰ªè´´æ¿
```

### å·¥ä½œæ¦‚è¦

1. **åˆ†æ**: åˆ†æ `git diff --staged` çš„å…§å®¹
2. **ç”Ÿæˆ**: ç”Ÿæˆåˆé©çš„æäº¤æ¶ˆæ¯
3. **å¾©åˆ¶**: è‡ªå‹•å°‡ä¸»è¦å€™é¸å¾©åˆ¶åˆ°å‰ªè´´æ¿

**æ³¨æ„**: æ­¤å‘½ä»¤ä¸åŸ·è¡Œ git add æˆ– git commitã€‚ä»…ç”Ÿæˆæäº¤æ¶ˆæ¯ä¸¦å¾©åˆ¶åˆ°å‰ªè´´æ¿ã€‚

### æ™ºèƒ½åŠŸèƒ½

#### 1. æ›´æ”¹å…§å®¹è‡ªå‹•åˆ†é¡ (ä»…æš‚å­˜æ–‡ä»¶)

- æ–°æ–‡ä»¶æ·»åŠ  â†’ `feat`
- éŒ¯èª¤ä¿®å¾©æ¨¡å¼ â†’ `fix`
- ä»…æ¸¬è©¦æ–‡ä»¶ â†’ `test`
- é…ç½®æ–‡ä»¶æ›´æ”¹ â†’ `chore`
- README/docs æ›´æ–° â†’ `docs`

#### 2. é …ç›®è¦ç¯„è‡ªå‹•æª¢æ¸¬

- `.gitmessage` æ–‡ä»¶
- `CONTRIBUTING.md` ä¸­çš„è¦ç¯„
- éå»æäº¤æ­·å²æ¨¡å¼

#### 3. èªè¨€åˆ¤å®šè©³æƒ… (ä»…æš‚å­˜æ›´æ”¹)

```bash
# åˆ¤å®šåŸºæº– (å„ªå…ˆç´š)
1. å¾ git diff --staged çš„å…§å®¹åˆ¤å®šèªè¨€
2. æš‚å­˜æ–‡ä»¶çš„æ³¨é‡‹åˆ†æ
3. git log --oneline -20 çš„èªè¨€åˆ†æ
4. é …ç›®ä¸»è¦èªè¨€è¨­ç½®
```

#### 4. æš‚å­˜åˆ†æè©³æƒ…

åˆ†æä½¿ç”¨çš„è³‡è¨Š (ä»…è®€å–):

- `git diff --staged --name-only` - æ›´æ”¹æ–‡ä»¶åˆ—è¡¨
- `git diff --staged` - å¯¦éš›æ›´æ”¹å…§å®¹
- `git status --porcelain` - æ–‡ä»¶ç‹€æ…‹

### Breaking Change æª¢æ¸¬æ™‚

å½“æœ‰ API ç ´åæ€§æ›´æ”¹æ™‚ï¼š

**è‹±æ–‡**:

```bash
feat!: change user API response format

BREAKING CHANGE: user response now includes additional metadata
```

æˆ–

```bash
feat(api)!: change authentication flow
```

**ç¹ä½“å­—ä¸­æ–‡**:

```bash
feat!: æ›´æ”¹ç”¨æˆ¶ API éŸ¿æ‡‰æ ¼å¼

BREAKING CHANGE: éŸ¿æ‡‰ç¾åœ¨åŒ…å«é¢å¤–çš„å…ƒæ•¸æ“š
```

æˆ–

```bash
feat(api)!: æ›´æ”¹èªè­‰æµç¨‹
```

### æœ€ä½³å¯¦è·µ

1. **é©æ‡‰é …ç›®**: éµå¾ªç¾æœ‰çš„æäº¤èªè¨€
2. **ç°¡æ´æ€§**: 50 å­—ç¬¦å…§è¦æ¸…æ¥š
3. **ä¸€è‡´æ€§**: ä¸è¦æ··åˆä½¿ç”¨ (è‹±æ–‡å°±çµ±ä¸€è‹±æ–‡)
4. **OSS**: é–‹æºè»Ÿä»¶æ¨è–¦è‹±æ–‡
5. **åšæŒå–®è¡Œ**: å¿…é¡»å–®è¡Œæäº¤æ¶ˆæ¯ (éœ€è¦è©³ç»†èªªæ˜æ™‚åœ¨ PR ä¸­è£œå……)

### å¸¸è¦‹æ¨¡å¼

**è‹±æ–‡**:

```text
feat: add user registration endpoint
fix: resolve memory leak in cache manager
docs: update API documentation
```

**ç¹ä½“å­—ä¸­æ–‡**:

```text
feat: æ·»åŠ ç”¨æˆ¶æ³¨å†Šç«¯é»
fix: è§£æ±ºç·©å­˜ç®¡ç†å™¨å…§å­˜æ´©æ¼
docs: æ›´æ–° API æ–‡æª”
```

### èˆ‡ Claude çš„å”ä½œ

```bash
# èˆ‡æš‚å­˜æ›´æ”¹çµåˆä½¿ç”¨
git add -p  # äº¤äº’å¼æš‚å­˜
/commit-message
"ç”Ÿæˆæœ€å„ªçš„æäº¤æ¶ˆæ¯"

# ä»…æš‚å­˜ç‰¹å®šæ–‡ä»¶å¾Œåˆ†æ
git add src/auth/*.js
/commit-message --lang zh-tw
"ç‚ºèªè­‰ç›¸é—œæ›´æ”¹ç”Ÿæˆåˆé©çš„æ¶ˆæ¯"

# Breaking Change æª¢æ¸¬å’Œæ‡‰å°
git add -A
/commit-message --breaking
"å¦‚æœ‰ç ´åæ€§æ›´æ”¹è«‹é©å½“æ¨™è¨˜"
```

### æ³¨æ„äº‹é …

- **å‰ææ¢ä»¶**: æ›´æ”¹éœ€è¦å…ˆé€šé `git add` æš‚å­˜
- **é™åˆ¶äº‹é …**: æœªæš‚å­˜çš„æ›´æ”¹ä¸åœ¨åˆ†æç¯„åœå…§
- **æ¨è–¦äº‹é …**: è«‹äº‹å…ˆç¢ºèªé …ç›®ç¾æœ‰çš„æäº¤è¦ç¯„
