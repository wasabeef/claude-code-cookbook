## ä¾è³´é—œç³»åˆ†æ

åˆ†æé …ç›®çš„ä¾è³´é—œç³»ï¼Œè©•ä¼°æ¶æ§‹çš„å¥åº·ç‹€å†µã€‚

### ä½¿ç”¨æ–¹æ³•

```bash
/dependency-analysis [é¸é …]
```

### é¸é …

- `--visual` : å¯è¦–åŒ–é¡¯ç¤ºä¾è³´é—œç³»
- `--circular` : ä»…æª¢æ¸¬å¾ªç’°ä¾è³´
- `--depth <æ•¸å€¼>` : æŒ‡å®šåˆ†ææ·±åº¦ (é»˜èª: 3)
- `--focus <è·¯å¾‘>` : èšç„¦äºç‰¹å®šæ¨¡å¡Š/ç›®éŒ„

### åŸºæœ¬ç¤ºä¾‹

```bash
# æ•´å€‹é …ç›®çš„ä¾è³´é—œç³»åˆ†æ
/dependency-analysis

# æª¢æ¸¬å¾ªç’°ä¾è³´
/dependency-analysis --circular

# ç‰¹å®šæ¨¡å¡Šçš„è©³ç»†åˆ†æ
/dependency-analysis --focus src/core --depth 5
```

### åˆ†æé …ç›®

#### 1. ä¾è³´é—œç³»çŸ©é˜µ

æ•¸å€¼åŒ–é¡¯ç¤ºæ¨¡å¡Šé–“çš„ä¾è³´é—œç³»ï¼š

- ç›´æ¥ä¾è³´
- é–“æ¥ä¾è³´
- ä¾è³´æ·±åº¦
- æ‰‡å…¥/æ‰‡å‡º

#### 2. æ¶æ§‹è¿è¦æª¢æ¸¬

- å±¤ç´šè¿è¦ (ä¸‹å±¤ä¾è³´ä¸Šå±¤)
- å¾ªç’°ä¾è³´
- éåº¦è€¦åˆ (é«˜ä¾è³´åº¦)
- å­¤ç«‹æ¨¡å¡Š

#### 3. Clean Architecture åˆè¦æ€§æª¢æŸ¥

- é ˜åŸŸå±¤çš„ç‹¬ç«‹æ€§
- åŸºç¤è¨­æ–½å±¤çš„é©å½“åˆ†é›¢
- ç”¨ä¾‹å±¤çš„ä¾è³´æ–¹å‘
- æ¥å£çš„æ‡‰ç”¨æƒ…å†µ

### è¼¸å‡ºç¤ºä¾‹

```text
ä¾è³´é—œç³»åˆ†æå ±å‘Š
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š æŒ‡æ¨™æ¦‚è¦½
â”œâ”€ æ¨¡å¡Šç¸½æ•¸: 42
â”œâ”€ å¹³å‡ä¾è³´æ•¸: 3.2
â”œâ”€ æœ€å¤§ä¾è³´æ·±åº¦: 5
â””â”€ å¾ªç’°ä¾è³´: æª¢æ¸¬åˆ° 2 å€‹

âš ï¸  æ¶æ§‹è¿è¦
â”œâ”€ [HIGH] src/domain/user.js â†’ src/infra/database.js
â”‚  â””â”€ é ˜åŸŸå±¤ç›´æ¥ä¾è³´åŸºç¤è¨­æ–½å±¤
â”œâ”€ [MED] src/api/auth.js âŸ² src/services/user.js
â”‚  â””â”€ æª¢æ¸¬åˆ°å¾ªç’°ä¾è³´
â””â”€ [LOW] src/utils/helper.js â†’ 12 modules
   â””â”€ æ‰‡å‡ºéåº¦

âœ… å»ºè­°æ“ä½œ
1. å¼•å…¥ UserRepository æ¥å£
2. é‡æ–°è¨­è¨ˆèªè­‰æœå‹™çš„èŒè²¬
3. æŒ‰åŠŸèƒ½æ‹†åˆ†è¾…åŠ©å‡½æ•¸

ğŸ“ˆ ä¾è³´é—œç³»åœ–
[ç”¨ ASCII è‰ºè¡“é¡¯ç¤ºå¯è¦–åŒ–ä¾è³´é—œç³»åœ–]
```

### é«˜ç´šç”¨æ³•

```bash
# CI/CD ç®¡é“ä¸­çš„è‡ªå‹•æª¢æŸ¥
/dependency-analysis --circular --fail-on-violation

# å®šç¾©å’Œé©—è­‰æ¶æ§‹è¦å‰‡
/dependency-analysis --rules .architecture-rules.yml

# è¿½è¹¤ä¾è³´é—œç³»çš„æ™‚é–“è®ŠåŒ–
/dependency-analysis --compare HEAD~10
```

### é…ç½®æ–‡ä»¶ç¤ºä¾‹ (.dependency-analysis.yml)

```yaml
rules:
  - name: "Domain Independence"
    source: "src/domain/**"
    forbidden: ["src/infra/**", "src/api/**"]

  - name: "API Layer Dependencies"
    source: "src/api/**"
    allowed: ["src/domain/**", "src/application/**"]
    forbidden: ["src/infra/**"]

thresholds:
  max_dependencies: 8
  max_depth: 4
  coupling_threshold: 0.7

ignore:
  - "**/test/**"
  - "**/mocks/**"
```

### é›†æˆå·¥å…·

- `madge` : JavaScript/TypeScript ä¾è³´é—œç³»å¯è¦–åŒ–
- `dep-cruiser` : ä¾è³´é—œç³»è¦å‰‡é©—è­‰
- `nx` : å–®é«”å€‰åº«ä¾è³´é—œç³»ç®¡ç†
- `plato` : å¾©æ‚åº¦èˆ‡ä¾è³´é—œç³»ç»¼åˆåˆ†æ

### èˆ‡ Claude çš„å”ä½œ

```bash
# åŒ…å« package.json çš„åˆ†æ
cat package.json
/analyze-dependencies
"åˆ†æé€™å€‹é …ç›®çš„ä¾è³´é—œç³»å•é¡Œ"

# çµåˆç‰¹å®šæ¨¡å¡Šçš„æºä»£ç¢¼
ls -la src/core/
/analyze-dependencies --focus src/core
"è©³ç»†è©•ä¼°æ ¸å¿ƒæ¨¡å¡Šçš„ä¾è³´é—œç³»"

# èˆ‡æ¶æ§‹æ–‡æª”å°æ¯”
cat docs/architecture.md
/analyze-dependencies --visual
"ç¢ºèªè¨­è¨ˆæ–‡æª”èˆ‡å¯¦ç¾çš„å·®ç•°"
```

### æ³¨æ„äº‹é …

- **å‰ææ¢ä»¶**: éœ€è¦åœ¨é …ç›®æ ¹ç›®éŒ„åŸ·è¡Œ
- **é™åˆ¶äº‹é …**: å¤§å‹é …ç›®çš„åˆ†æå¯èƒ½éœ€è¦è¾ƒé•¿æ™‚é–“
- **å»ºè­°äº‹é …**: ç™¼ç¾å¾ªç’°ä¾è³´æ™‚æ‡‰ç«‹å³è€ƒè™‘è™•ç†

### æœ€ä½³å¯¦è·µ

1. **å®šæœŸåˆ†æ**: æ¯é€±æª¢æŸ¥ä¾è³´é—œç³»çš„å¥åº·ç‹€å†µ
2. **è¦å‰‡æ˜æ–‡åŒ–**: é€šéé…ç½®æ–‡ä»¶ç®¡ç†æ¶æ§‹è¦å‰‡
3. **æ¸é€²å¼æ”¹é€²**: é¿å…å¤§è¦æ¨¡é‡æ§‹ï¼Œé€æ­¥æ”¹é€²
4. **æŒ‡æ¨™è¿½è¹¤**: ç›£æ§ä¾è³´é—œç³»å¾©æ‚åº¦çš„æ™‚é–“åºåˆ—
